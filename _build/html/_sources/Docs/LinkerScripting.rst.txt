Linker Scripting
================

Numinous linker is unlike other linkers as it does not create object files but instead is used to map contents. The Linker Script must be written to abide the specified ``toml`` template described in docs here.

Example:

.. code-block:: toml

    [memory]
        ram         = [1, 0x0000, 0x8000]
        flash       = [0, 0x8000, 0x8000]

    [segments]
        direct      = ["ram",   0x0000, 0x0100]
        rodata      = ["flash", 0x0000, 0x0140]
        boot        = ["flash", 0xf000, 0x1000]
        proc        = ["flash", -1, 0]
        vectors     = ["flash", 0x7ffa, 6]

``memory`` contains the physical locations for information. Each array in ``memory`` acts as a struct: the first element is a 'write flag', the second element is the final pointer base offset and the third and final element is the run length (or size) of the memory component.

``segments`` contains the 'segments' of information hunks, all information given to a segment begins *from* the first pointer base offset (or the index of the segment) and must collectively fit inside the segment run length (or segment size). The names of components in ``memory`` are not special and are never visible in source.

To allocate memory to a specified segment, the user simply types:

.. code-block::

    direct u8 MyFoo         // will use 'direct' segment

To write a procedure to a specified segment, the user simply types:

.. code-block::

    .boot init {
        // example code for 'boot' segment here
    }

To reserve non-variable information for a specified segment, the user simply types:

.. code-block::

    rodata u8[] Table {
        // const information for the rodata table
    }

    // a ptr
    rodata u16 ptr

It's known to be ``const`` without specifying as the ``memory`` specified in the ``segment`` has the write flag clear.